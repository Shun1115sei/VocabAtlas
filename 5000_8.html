<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOEFLåŒ–å­¦å˜èªãƒã‚¹ã‚¿ãƒ¼ - Sequential Mode</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --success-color: #2ecc71;
            --retry-color: #f39c12;
            --bg-color: #f0f2f5;
            --card-front: #ffffff;
            --card-back: #fff9f0;
            --text-main: #2c3e50;
        }

        body {
            font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        header {
            padding: 20px;
            text-align: center;
        }

        .progress-container {
            width: 300px;
            margin-bottom: 20px;
            text-align: center;
        }

        /* ä¿®æ­£ç‚¹2: ãƒãƒ¼ã‚’ä¸­å¤®ã«é…ç½® */
        .progress-bar {
            background: #ddd;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            width: 100%;
            margin: 10px auto; 
        }

        #progress-fill {
            background: var(--primary-color);
            height: 100%;
            width: 0%;
            transition: width 0.3s;
        }

        /* 3D Card Animation */
        .scene {
            width: 340px;
            height: 480px;
            perspective: 1000px;
            cursor: pointer;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-radius: 20px;
        }

        .card.is-flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            padding: 30px;
            box-sizing: border-box;
        }

        .card-front {
            background-color: var(--card-front);
            justify-content: center;
            align-items: center;
        }

        .card-back {
            background-color: var(--card-back);
            transform: rotateY(180deg);
            justify-content: flex-start;
            overflow-y: auto;
        }

        /* Front Content */
        .word-num { font-size: 0.9rem; color: #aaa; margin-bottom: 5px; }
        .word { font-size: 2rem; font-weight: bold; margin-bottom: 10px; color: var(--primary-color); text-align: center; }
        .phonetic { font-size: 1.1rem; color: #7f8c8d; font-family: 'Arial', sans-serif; }
        .audio-btn {
            background: #f8f9fa; border: 1px solid #ddd; border-radius: 50%; width: 50px; height: 50px;
            margin-top: 30px; cursor: pointer; display: flex; align-items: center; justify-content: center;
            transition: background 0.2s;
        }
        .audio-btn:hover { background: #e9ecef; }

        /* Back Content */
        .translation { font-size: 1.5rem; font-weight: bold; border-bottom: 2px solid var(--retry-color); padding-bottom: 10px; margin-bottom: 20px; }
        .meaning-title { font-weight: bold; color: #e67e22; margin-top: 10px; font-size: 0.9rem; text-transform: uppercase; }
        .meaning { font-size: 1.05rem; line-height: 1.6; color: #444; }

        /* Controls */
        .controls {
            margin-top: 30px;
            display: flex;
            gap: 15px;
        }

        button.action-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.1s, opacity 0.2s;
            color: white;
        }

        button.action-btn:active { transform: scale(0.95); }
        .btn-learned { background-color: var(--success-color); }
        .btn-retry { background-color: var(--retry-color); }

        /* Complete View */
        #complete-screen {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .hidden { display: none !important; }

        @media (max-width: 400px) {
            .scene { width: 90vw; height: 450px; }
        }
    </style>
</head>
<body>

<header>
    <h1>ğŸ§ª Chemistry Vocabulary</h1>
    <div class="progress-container">
        <div id="count-display">æ®‹ã‚Š: 30 æš</div>
        <div class="progress-bar"><div id="progress-fill"></div></div>
    </div>
</header>

<div id="game-container">
    <div class="scene" onclick="flipCard()">
        <div class="card" id="card">
            <div class="card-face card-front">
                <div class="word-num" id="num-display">No. 01</div>
                <div class="word" id="word-display">Word</div>
                <div class="phonetic" id="phonetic-display">/phonetic/</div>
                <button class="audio-btn" onclick="speakWord(event)" title="éŸ³å£°ã‚’èã">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
                </button>
            </div>
            <div class="card-face card-back">
                <div class="translation" id="translation-display">æ—¥æœ¬èªè¨³</div>
                <div class="meaning-title">ğŸ’¡ å…ˆç”Ÿã®è§£èª¬</div>
                <div class="meaning" id="meaning-display">è§£èª¬ãƒ†ã‚­ã‚¹ãƒˆ</div>
            </div>
        </div>
    </div>

    <div class="controls">
        <button class="action-btn btn-retry" onclick="nextCard(false)">ğŸ”„ è‹¦æ‰‹ / ã¾ã </button>
        <button class="action-btn btn-learned" onclick="nextCard(true)">âœ… è¦šãˆãŸ (é™¤å¤–)</button>
    </div>
</div>

<div id="complete-screen">
    <h2>ğŸ‰ ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼</h2>
    <p>å†™çœŸã«è¼‰ã£ã¦ã„ã‚‹ã™ã¹ã¦ã®å˜èªã‚’ç¿’å¾—ã—ã¾ã—ãŸï¼</p>
    <button class="action-btn btn-learned" onclick="resetGame()" style="background-color: var(--primary-color)">ã‚‚ã†ä¸€åº¦æœ€åˆã‹ã‚‰</button>
</div>

<script>
    // å†™çœŸã®é€šã‚Šã®é †ç•ªï¼ˆ1ã€œ30ï¼‰ã§å®šç¾©
    const vocabulary = [
        { id: "01", word: "chemicals", phonetic: "[kÃ©mikÉ™ls]", translation: "åŒ–å­¦ç‰©è³ª", meaning: "ã€Œè–¬å“ã€ã‚„ã€ŒåŒ–å­¦è£½å“ã€ã®ã“ã¨ã€‚<br>ç†ç§‘ã®å®Ÿé¨“ã§ä½¿ã†æ¶²ä½“ã‚„ç²‰æœ«ã€èº«ã®å›ã‚Šã®æ´—å‰¤ãªã©ã‚‚ã“ã‚Œã«å«ã¾ã‚Œã¾ã™ã€‚" },
        { id: "02", word: "oxygen", phonetic: "[É‘ÌksidÊ’É™n]", translation: "é…¸ç´  (O)", meaning: "ç§ãŸã¡ãŒå‘¼å¸ã§å–ã‚Šè¾¼ã‚“ã§ã„ã‚‹æ°—ä½“ã€‚<br>ç‰©ãŒç‡ƒãˆã‚‹ã®ã«ã‚‚å¿…è¦ä¸å¯æ¬ ãªè¦ç´ ã§ã™ã€‚" },
        { id: "03", word: "mercury", phonetic: "[mÃ³Ërkjuri]", translation: "æ°´éŠ€ (Hg)", meaning: "å¸¸æ¸©ã§ãƒ‰ãƒ­ãƒ‰ãƒ­ã®æ¶²ä½“ã§ã‚ã‚‹çã—ã„é‡‘å±ã€‚<br>æ˜”ã®ä½“æ¸©è¨ˆã®ä¸­ã«å…¥ã£ã¦ã„ãŸéŠ€è‰²ã®æ¶²ä½“ã®ã“ã¨ã§ã™ã€‚" },
        { id: "04", word: "sodium chloride", phonetic: "[sÃ³udiÉ™m klÉ”ÌËraid]", translation: "å¡©åŒ–ãƒŠãƒˆãƒªã‚¦ãƒ  (NaCl)", meaning: "ã‚ºãƒãƒªã€Œé£Ÿå“ã«ã‚ã‚‹å¡©ã€ã®ã“ã¨ã€‚<br>åŒ–å­¦ã®ä¸–ç•Œã§ã¯ã€ãƒŠãƒˆãƒªã‚¦ãƒ ã¨å¡©ç´ ãŒåˆä½“ã—ãŸã‚‚ã®ã¨å‘¼ã³ã¾ã™ã€‚" },
        { id: "05", word: "density", phonetic: "[dÃ©nsÉ™ti]", translation: "å¯†åº¦", meaning: "ã‚ã‚‹ã‚¹ãƒšãƒ¼ã‚¹ã«ã©ã‚Œã ã‘ã€Œã‚®ãƒ¥ãƒƒã€ã¨ä¸­èº«ãŒè©°ã¾ã£ã¦ã„ã‚‹ã‹ã€‚<br>é‡ã„é‡‘å±ã¯å¯†åº¦ãŒé«˜ãã€ã‚¹ãƒãƒ³ã‚¸ã¯å¯†åº¦ãŒä½ã„ã§ã™ã€‚" },
        { id: "06", word: "solution", phonetic: "[sÉ™lÃºËÊƒÉ™n]", translation: "æº¶æ¶²", meaning: "æ¶²ä½“ã«ä½•ã‹ãŒæº¶ã‘è¾¼ã‚“ã§ã€å‡ä¸€ã«æ··ã–ã‚Šåˆã£ãŸçŠ¶æ…‹ã®æ¶²ã€‚<br>ç ‚ç³–æ°´ã‚‚ç«‹æ´¾ãªæº¶æ¶²ã§ã™ã€‚" },
        { id: "07", word: "dissolve", phonetic: "[dizÉ‘Ìlv]", translation: "ï½ã‚’æº¶è§£ã•ã›ã‚‹", meaning: "ã€Œæº¶ã‹ã™ã€ã¨ã„ã†æ„å‘³ã€‚<br>ã‚³ãƒ¼ãƒ’ãƒ¼ã«ç ‚ç³–ã‚’å…¥ã‚Œã¦è¦‹ãˆãªããªã‚‹ç¾è±¡ã‚’æŒ‡ã—ã¾ã™ã€‚" },
        { id: "08", word: "dilute", phonetic: "[dilÃºËt]", translation: "ï½ã‚’å¸Œé‡ˆã™ã‚‹", meaning: "ã€Œè–„ã‚ã‚‹ã€ã“ã¨ã€‚<br>ã‚«ãƒ«ãƒ”ã‚¹ã®åŸæ¶²ã«æ°´ã‚’å…¥ã‚Œã¦é£²ã¿ã‚„ã™ãã™ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚" },
        { id: "09", word: "saturate", phonetic: "[sÇ½tÊƒÉ™rÃ¨it]", translation: "ï½ã‚’é£½å’Œã•ã›ã‚‹", meaning: "ã€Œã„ã£ã±ã„ã¾ã§æº€ãŸã™ã€ã“ã¨ã€‚<br>ã“ã‚Œä»¥ä¸Šæº¶ã‘ãªã„ã‚®ãƒªã‚®ãƒªã¾ã§æº¶ã‹ã—ãŸçŠ¶æ…‹ã‚’æŒ‡ã—ã¾ã™ã€‚" },
        { id: "10", word: "crystallize", phonetic: "[krÃ­stÉ™lÃ iz]", translation: "ï½ã‚’çµæ™¶ã•ã›ã‚‹", meaning: "æº¶ã‘ã¦ã„ãŸã‚‚ã®ãŒã€ã‚­ãƒ©ã‚­ãƒ©ã—ãŸç²’ï¼ˆçµæ™¶ï¼‰ã«ãªã£ã¦å‡ºã¦ãã‚‹ã“ã¨ã€‚<br>å¡©ç”°ã§å¡©ãŒã§ãã‚‹æ™‚ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚" },
        { id: "11", word: "filter", phonetic: "[fÃ­ltÉ™r]", translation: "ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ / ã‚éã™ã‚‹", meaning: "ç¶²ã‚„ç´™ã‚’ä½¿ã£ã¦ã€æ¶²ä½“ã‹ã‚‰ã‚´ãƒŸã‚„ç²’ã‚’å–ã‚Šé™¤ãã“ã¨ã€‚<br>ã‚³ãƒ¼ãƒ’ãƒ¼ã‚’ãƒ‰ãƒªãƒƒãƒ—ã™ã‚‹ä½œæ¥­ãŒã¾ã•ã«ã€Œã‚éã€ã§ã™ã€‚" },
        { id: "12", word: "atom", phonetic: "[Ç½tÉ™m]", translation: "åŸå­", meaning: "ç‰©è³ªã‚’ãƒãƒ©ãƒãƒ©ã«ã—ã¦ã„ã£ãŸæ™‚ã®ã€Œæœ€å°ã®ç²’ã€ã€‚<br>ä¸­å¿ƒã«æ ¸ãŒã‚ã‚Šã€å‘¨ã‚Šã‚’é›»å­ãŒå›ã£ã¦ã„ã‚‹æ§‹é€ ã§ã™ã€‚" },
        { id: "13", word: "flame test", phonetic: "[flÃ©im test]", translation: "ç‚è‰²åå¿œ", meaning: "é‡‘å±ã‚’ç«ã«ã‹ã–ã™ã¨ã€èµ¤ã‚„ç·‘ãªã©ç‰¹å®šã®è‰²ã«ç«ãŒæŸ“ã¾ã‚‹å®Ÿé¨“ã€‚<br>èŠ±ç«ã®è‰²ãŒã‚«ãƒ©ãƒ•ãƒ«ãªã®ã¯ã“ã®åŸç†ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚" },
        { id: "14", word: "periodic table", phonetic: "[piÉ™riÉ‘Ìdik tÃ©ibl]", translation: "å‘¨æœŸè¡¨", meaning: "ã€Œæ°´ãƒ»å…µãƒ»ãƒªãƒ¼ãƒ»ãƒ™â€¦ã€ã®ã‚ã®è¡¨ã€‚<br>å…ƒç´ ã‚’æ€§è³ªã”ã¨ã«ä¸¦ã¹ãŸã€åŒ–å­¦ã®åœ°å›³ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚" },
        { id: "15", word: "isotope", phonetic: "[Ã¡isÉ™tÃ²up]", translation: "åŒä½ä½“", meaning: "ã€Œé‡ã•ã ã‘ãŒé•ã†åŒå­ã€ã®ã‚ˆã†ãªåŸå­ã€‚<br>æ€§è³ªã¯ã»ã¼åŒã˜ã ã‘ã©ã€é‡ã•ï¼ˆä¸­æ€§å­ã®æ•°ï¼‰ãŒé•ã„ã¾ã™ã€‚" },
        { id: "16", word: "element", phonetic: "[Ã©lÉ™mÉ™nt]", translation: "å…ƒç´ ", meaning: "ç‰©è³ªã‚’æ§‹æˆã™ã‚‹ã€Œç¨®é¡ã€ã®ã“ã¨ã€‚<br>é…¸ç´ ã‚„é‡‘ã€æ°´ç´ ãªã©ã€ã“ã‚Œä»¥ä¸Šåˆ†ã‘ã‚‰ã‚Œãªã„åŸºæœ¬çš„ãªã‚«ãƒ†ã‚´ãƒªãƒ¼ã§ã™ã€‚" },
        { id: "17", word: "compound", phonetic: "[kÉ‘Ìmpaund]", translation: "åŒ–åˆç‰©", meaning: "2ç¨®é¡ä»¥ä¸Šã®å…ƒç´ ãŒã‚¬ãƒƒãƒãƒªæ¡æ‰‹ã—ã¦åˆä½“ã—ãŸç‰©è³ªã€‚<br>æ°´ï¼ˆæ°´ç´ ï¼‹é…¸ç´ ï¼‰ãªã©ãŒä»£è¡¨ä¾‹ã§ã™ã€‚" },
        { id: "18", word: "molecule", phonetic: "[mÉ‘ÌlÉ™kjÃ¹Ël] ", translation: "åˆ†å­", meaning: "ãã®ç‰©è³ªã®æ€§è³ªã‚’ä¿ã£ãŸã¾ã¾å­˜åœ¨ã§ãã‚‹ã€Œæœ€å°ã®ã‚°ãƒ«ãƒ¼ãƒ—ã€ã€‚<br>åŸå­ãŒã„ãã¤ã‹é›†ã¾ã£ã¦ã§ãã¦ã„ã¾ã™ã€‚" },
        { id: "19", word: "saline", phonetic: "[sÃ©iliËn]", translation: "å¡©åˆ†ãŒå«ã¾ã‚ŒãŸ", meaning: "ã€Œå¡©æ°—ã®ã‚ã‚‹ã€ã¨ã„ã†æ„å‘³ã€‚<br>åŒ»å­¦ã§ã¯ç”Ÿç†é£Ÿå¡©æ°´ã®ã“ã¨ã‚’ saline solution ã¨å‘¼ã³ã¾ã™ã€‚" },
        { id: "20", word: "oxidation", phonetic: "[É‘Ì€ksidÃ©iÊƒÉ™n]", translation: "é…¸åŒ–", meaning: "é…¸ç´ ã¨ãã£ã¤ãåå¿œã€‚<br>é‰„ãŒéŒ†ã³ãŸã‚Šã€ãƒªãƒ³ã‚´ãŒèŒ¶è‰²ããªã£ãŸã‚Šã™ã‚‹ã®ãŒã€Œé…¸åŒ–ã€ã§ã™ã€‚" },
        { id: "21", word: "reduction", phonetic: "[ridÊŒÌkÊƒÉ™n]", translation: "é‚„å…ƒ", meaning: "é…¸åŒ–ã®é€†ã€‚é…¸ç´ ã‚’é›¢ã—ã¦å…ƒã®çŠ¶æ…‹ã«æˆ»ã‚‹ã“ã¨ã€‚<br>éŒ†ã³ãŸé‡‘å±ã‚’å…ƒã«æˆ»ã™ã‚ˆã†ãªãƒ—ãƒ­ã‚»ã‚¹ã§ã™ã€‚" },
        { id: "22", word: "catalyst", phonetic: "[kÃ¦tÉ™list]", translation: "è§¦åª’", meaning: "è‡ªåˆ†è‡ªèº«ã¯å¤‰åŒ–ã—ãªã„ã®ã«ã€å‘¨ã‚Šã®åå¿œã‚’ã‚ã¡ã‚ƒãã¡ã‚ƒé€Ÿã‚ã‚‹ã€ŒãŠåŠ©ã‘å½¹ã€ã®ã“ã¨ã€‚" },
        { id: "23", word: "evaporation", phonetic: "[ivÃ¦pÉ™rÃ©iÊƒÉ™n]", translation: "è’¸ç™º", meaning: "æ¶²ä½“ãŒæ°—ä½“ã«ãªã£ã¦é£›ã‚“ã§ã„ãã“ã¨ã€‚<br>æ´—æ¿¯ç‰©ãŒä¹¾ãã®ã¯ã€æ°´åˆ†ãŒè’¸ç™ºã—ã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚" },
        { id: "24", word: "alkali", phonetic: "[Ã¦lkÉ™lÃ i]", translation: "å¡©åŸº (ã‚¢ãƒ«ã‚«ãƒªæ€§)", meaning: "è‹¦å‘³ãŒã‚ã‚Šã€ã‚¿ãƒ³ãƒ‘ã‚¯è³ªã‚’æº¶ã‹ã™æ€§è³ªã€‚<br>çŸ³é¹¸æ°´ãªã©ãŒèº«è¿‘ãªã‚¢ãƒ«ã‚«ãƒªæ€§ã§ã™ã€‚" },
        { id: "25", word: "acid", phonetic: "[Ã¦sid]", translation: "é…¸", meaning: "ãƒ¬ãƒ¢ãƒ³ã®ã‚ˆã†ã«é…¸ã£ã±ã„æ€§è³ªã€‚<br>é‡‘å±ã‚’æº¶ã‹ã—ãŸã‚Šã€ãƒªãƒˆãƒã‚¹è©¦é¨“ç´™ã‚’èµ¤ãã—ãŸã‚Šã—ã¾ã™ã€‚" },
        { id: "26", word: "neutralize", phonetic: "[njÃºËtrÉ™lÃ iz]", translation: "ä¸­å’Œã™ã‚‹", meaning: "é…¸æ€§ã¨ã‚¢ãƒ«ã‚«ãƒªæ€§ã‚’æ··ãœã¦ã€ãŠäº’ã„ã®æ€§è³ªã‚’æ‰“ã¡æ¶ˆã—åˆã£ã¦ã€Œæ°´ã€ã«ã™ã‚‹ã“ã¨ã€‚" },
        { id: "27", word: "concentration", phonetic: "[kÉ‘Ì€nsÉ™ntrÃ©iÊƒÉ™n]", translation: "æ¿ƒåº¦", meaning: "æ¶²ä½“ã®ã€Œæ¿ƒã•ã€ã®ã“ã¨ã€‚<br>ã©ã‚Œãã‚‰ã„æˆåˆ†ãŒæº¶ã‘è¾¼ã‚“ã§ã„ã‚‹ã‹ã®å‰²åˆã‚’æŒ‡ã—ã¾ã™ã€‚" },
        { id: "28", word: "osmosis", phonetic: "[É‘zmÃ³usis]", translation: "æµ¸é€", meaning: "è†œã‚’é€šã—ã¦ã€æ°´åˆ†ãŒè–„ã„æ–¹ã‹ã‚‰æ¿ƒã„æ–¹ã¸ã¨ç§»å‹•ã™ã‚‹ç¾è±¡ã€‚<br>ãƒŠãƒ¡ã‚¯ã‚¸ã«å¡©ã‚’ã‹ã‘ã‚‹ã¨ç¸®ã‚€ã®ã‚‚æµ¸é€ã®ã›ã„ã§ã™ã€‚" },
        { id: "29", word: "carbohydrate", phonetic: "[kÉ‘Ì€ËrbouhÃ¡idreit]", translation: "ç‚­æ°´åŒ–ç‰©", meaning: "ã”é£¯ã€ãƒ‘ãƒ³ã€ç ‚ç³–ãªã©ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼æºã€‚<br>ç‚­ç´ ãƒ»æ°´ç´ ãƒ»é…¸ç´ ã‹ã‚‰ã§ãã¦ã„ã¾ã™ã€‚" },
        { id: "30", word: "enzyme", phonetic: "[Ã©nzaim]", translation: "é…µç´ ", meaning: "ä½“ã®ä¸­ã§é£Ÿã¹ç‰©ã‚’æ¶ˆåŒ–ã—ãŸã‚Šã€ä»£è¬ã‚’åŠ©ã‘ãŸã‚Šã™ã‚‹ã€Œç‰¹æ®Šãªã‚¿ãƒ³ãƒ‘ã‚¯è³ªã€ã®ã“ã¨ã€‚" }
    ];

    let remainingWords = [];
    let currentIndex = 0;

    function initGame() {
        // ä¿®æ­£ç‚¹1: ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã‚’å‰Šé™¤ã—ã€å¸¸ã«å…ƒã®é…åˆ—ã®ã‚³ãƒ”ãƒ¼ã‚’ä½¿ç”¨
        remainingWords = [...vocabulary];
        currentIndex = 0;
        showComplete(false);
        updateCard();
    }

    function updateCard() {
        if (remainingWords.length === 0) {
            showComplete(true);
            return;
        }
        
        // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒç¯„å›²å¤–ã«ãªã‚‰ãªã„ã‚ˆã†èª¿æ•´
        if (currentIndex >= remainingWords.length) {
            currentIndex = 0;
        }

        const current = remainingWords[currentIndex];
        document.getElementById('num-display').textContent = `No. ${current.id}`;
        document.getElementById('word-display').textContent = current.word;
        document.getElementById('phonetic-display').textContent = current.phonetic;
        document.getElementById('translation-display').textContent = current.translation;
        document.getElementById('meaning-display').innerHTML = current.meaning;
        
        document.getElementById('count-display').textContent = `æ®‹ã‚Š: ${remainingWords.length} æš`;
        
        // é€²æ—ãƒãƒ¼ã®è¨ˆç®—
        const progress = ((vocabulary.length - remainingWords.length) / vocabulary.length) * 100;
        document.getElementById('progress-fill').style.width = `${progress}%`;
        
        const card = document.getElementById('card');
        card.classList.remove('is-flipped');
    }

    function flipCard() {
        document.getElementById('card').classList.toggle('is-flipped');
    }

    function nextCard(isLearned) {
        if (isLearned) {
            // ãƒªã‚¹ãƒˆã‹ã‚‰å‰Šé™¤ã—ã¦æ¬¡ã®ã‚«ãƒ¼ãƒ‰ã¸
            remainingWords.splice(currentIndex, 1);
        } else {
            // å‰Šé™¤ã›ãšã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ¬¡ã«é€²ã‚ã‚‹ï¼ˆãƒ«ãƒ¼ãƒ—ã™ã‚‹ï¼‰
            currentIndex = (currentIndex + 1) % remainingWords.length;
        }
        updateCard();
    }

    function speakWord(event) {
        event.stopPropagation();
        const word = remainingWords[currentIndex].word;
        const utterance = new SpeechSynthesisUtterance(word);
        utterance.lang = 'en-US';
        
        const voices = speechSynthesis.getVoices();
        const preferredVoice = voices.find(v => v.name.includes("Google US English") || v.name.includes("Samantha") || v.name.includes("Alex"));
        if (preferredVoice) utterance.voice = preferredVoice;
        
        speechSynthesis.speak(utterance);
    }

    function showComplete(isFinished) {
        document.getElementById('game-container').classList.toggle('hidden', isFinished);
        document.getElementById('complete-screen').classList.toggle('hidden', !isFinished);
        if(isFinished) {
            document.getElementById('count-display').textContent = `ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆï¼`;
            document.getElementById('progress-fill').style.width = `100%`;
        }
    }

    function resetGame() {
        initGame();
    }

    // éŸ³å£°ãƒªã‚¹ãƒˆèª­ã¿è¾¼ã¿ã®åˆæœŸåŒ–
    window.speechSynthesis.onvoiceschanged = () => {};
    
    // èµ·å‹•
    initGame();
</script>

</body>
</html>
