<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical English Flashcards</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --bg-color: #f0f2f5;
            --card-width: 340px;
            --card-height: 480px;
        }

        body {
            font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            color: #333;
        }

        #header {
            margin-bottom: 20px;
            text-align: center;
        }

        .progress-info {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }

        .card-container {
            width: var(--card-width);
            height: var(--card-height);
            perspective: 1000px;
            cursor: pointer;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
        }

        .card.is-flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            padding: 30px;
            box-sizing: border-box;
            background: white;
        }

        .card-front {
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .word {
            font-size: 2.2rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .phonetic {
            font-family: 'Lucida Sans Unicode', sans-serif;
            font-size: 1.1rem;
            color: #888;
            margin-bottom: 30px;
        }

        .audio-btn {
            background: #eee;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }

        .audio-btn:hover {
            background: #e0e0e0;
        }

        .card-back {
            transform: rotateY(180deg);
            justify-content: flex-start;
            overflow-y: auto;
        }

        .translation {
            font-size: 1.4rem;
            font-weight: bold;
            color: #333;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .meaning-box {
            font-size: 0.95rem;
            line-height: 1.6;
            color: #555;
            text-align: justify;
        }

        /* ä¿®æ­£ç®‡æ‰€ï¼šãƒœã‚¿ãƒ³ã‚’ä¸­å¤®å¯„ã›ã«ã™ã‚‹è¨­å®š */
        .controls {
            margin-top: 30px;
            display: flex;
            justify-content: center; /* æ¨ªæ–¹å‘ã®ä¸­å¤®å¯„ã› */
            gap: 15px;
            width: 100%; /* ã‚³ãƒ³ãƒ†ãƒŠå¹…ã‚’ã„ã£ã±ã„ã«åºƒã’ã‚‹ */
            max-width: var(--card-width);
        }

        button.action-btn {
            flex: 1; /* ãƒœã‚¿ãƒ³ã®å¹…ã‚’å‡ç­‰ã«ã™ã‚‹ */
            min-width: 140px; /* æ¥µç«¯ã«å°ã•ããªã‚‰ãªã„ã‚ˆã†ã« */
            padding: 12px 10px;
            border: none;
            border-radius: 30px;
            font-size: 0.95rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.1s, opacity 0.2s;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center; /* ãƒ†ã‚­ã‚¹ãƒˆã‚’ä¸­å¤®å¯„ã› */
            gap: 8px;
        }

        button.action-btn:active {
            transform: scale(0.95);
        }

        .btn-learned { background-color: var(--success-color); }
        .btn-retry { background-color: var(--warning-color); }

        #complete-screen {
            display: none;
            text-align: center;
        }

        #complete-screen h2 {
            font-size: 2rem;
            color: var(--success-color);
        }

        .restart-btn {
            padding: 15px 40px;
            font-size: 1.2rem;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 20px;
        }

        @media (max-width: 400px) {
            :root {
                --card-width: 90vw;
                --card-height: 70vh;
            }
            .controls {
                padding: 0 10px;
            }
        }
    </style>
</head>
<body>

    <div id="game-container">
        <div id="header">
            <h1 style="margin:0; font-size: 1.5rem;">TOEFL Medical Vocab</h1>
            <div class="progress-info" id="progress-info">Loading...</div>
        </div>

        <div class="card-container" onclick="flipCard()">
            <div class="card" id="card">
                <div class="card-face card-front">
                    <div class="word" id="word-display">Word</div>
                    <div class="phonetic" id="phonetic-display">[phonetic]</div>
                    <button class="audio-btn" onclick="playAudio(event)">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
                    </button>
                </div>
                <div class="card-face card-back">
                    <div class="translation" id="translation-display">æ—¥æœ¬èªè¨³</div>
                    <div class="meaning-box" id="meaning-display"></div>
                </div>
            </div>
        </div>

        <div class="controls" id="controls">
            <button class="action-btn btn-retry" onclick="markAsRetry()">
                ğŸ”„ è‹¦æ‰‹ / ã¾ã 
            </button>
            <button class="action-btn btn-learned" onclick="markAsLearned()">
                âœ… è¦šãˆãŸ
            </button>
        </div>
    </div>

    <div id="complete-screen">
        <h2>ğŸ‰ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</h2>
        <p>åŒ»å­¦ãƒ»å¥åº·ã®å…¨å˜èªã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ã¾ã—ãŸã€‚</p>
        <button class="restart-btn" onclick="restart()">æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™</button>
    </div>

    <script>
        const wordData = [
            { "Word": "clinical", "Phonetic": "[klÃ­nikÉ™l]", "Translation": "è‡¨åºŠã®", "Meaning": "å®Ÿéš›ã®æ‚£è€…ã•ã‚“ã‚’è¨ºå¯Ÿã—ãŸã‚Šã€æ²»ç™‚ã—ãŸã‚Šã™ã‚‹ã€Œç¾å ´ã€ã®ã“ã¨ã€‚<br>æ•™ç§‘æ›¸ä¸Šã®ç†è«–ã§ã¯ãªãã€ãƒ™ãƒƒãƒ‰ã‚µã‚¤ãƒ‰ã§ã®å®Ÿè·µçš„ãªåŒ»ç™‚ã‚’æŒ‡ã—ã¾ã™ã€‚" },
            { "Word": "donate", "Phonetic": "[dÃ³uneit]", "Translation": "ï½ã‚’æä¾›ã™ã‚‹", "Meaning": "è¡€ã‚„è‡“å™¨ã€ã‚ã‚‹ã„ã¯å¯„ä»˜é‡‘ãªã©ã‚’ã€èª°ã‹ã®å½¹ã«ç«‹ã¦ã‚‹ãŸã‚ã«ã€Œã©ã†ãã€ã¨å·®ã—å‡ºã™ã“ã¨ã€‚<br>ãƒ‰ãƒŠãƒ¼ï¼ˆæä¾›è€…ï¼‰ã®å‹•è©å½¢ã§ã™ã€‚" },
            { "Word": "disorder", "Phonetic": "[disÉ”ÌËrdÉ™r]", "Translation": "ï¼ˆèº«ä½“æ©Ÿèƒ½ã®ï¼‰éšœå®³ã€ç•°å¸¸", "Meaning": "ä½“ã®ã‚·ã‚¹ãƒ†ãƒ ãŒã€Œã‚ªãƒ¼ãƒ€ãƒ¼ï¼ˆé †åºãƒ»æ­£å¸¸ï¼‰ã€é€šã‚Šã«å‹•ã‹ãªããªã‚Šã€ãƒãƒ©ãƒ³ã‚¹ãŒå´©ã‚Œã¦ã—ã¾ã£ã¦ã„ã‚‹çŠ¶æ…‹ã‚’æŒ‡ã—ã¾ã™ã€‚" },
            { "Word": "epidemic", "Phonetic": "[Ã¨pÉ™dÃ©mik]", "Translation": "æµè¡Œã€ä¼æŸ“ç—…ã®ç™ºç”Ÿ", "Meaning": "ç‰¹å®šã®åœ°åŸŸã§ã€ã‚ã‚‹ç—…æ°—ãŒãƒ¯ãƒƒã¨ä¸€æ°—ã«åºƒã¾ã‚‹ç¾è±¡ã€‚<br>ãƒ‘ãƒ³ãƒ‡ãƒŸãƒƒã‚¯ï¼ˆä¸–ç•Œçš„å¤§æµè¡Œï¼‰ã®ä¸€æ­©æ‰‹å‰ã®è¦æ¨¡ã¨ã„ã†ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚" },
            { "Word": "contagious", "Phonetic": "[kÉ™ntÃ©idÊ’É™s]", "Translation": "ä¼æŸ“æ€§ã®", "Meaning": "è§¦ã‚ŒãŸã‚Šã€è¿‘ãã§å‘¼å¸ã—ãŸã‚Šã™ã‚‹ã ã‘ã§ã€Œã†ã¤ã‚Šã‚„ã™ã„ã€æ€§è³ªã®ã“ã¨ã€‚<br>æ„ŸæŸ“åŠ›ãŒå¼·ã„æ§˜å­ã‚’æŒ‡ã—ã¾ã™ã€‚" },
            { "Word": "pathogen", "Phonetic": "[pÃ¦ÌÎ¸É™dÊ’É™n]", "Translation": "ç—…åŸèŒã€ç—…åŸä½“", "Meaning": "ã‚¦ã‚¤ãƒ«ã‚¹ã‚„ç´°èŒãªã©ã€ç§ãŸã¡ã®ä½“ã‚’ç—…æ°—ã«ã•ã›ã‚‹ã€Œæ‚ªè€…ï¼ˆåŸå› ç‰©è³ªï¼‰ã€ã®ç·ç§°ã§ã™ã€‚" },
            { "Word": "infestation", "Phonetic": "[Ã¬nfestÃ©iÊƒÉ™n]", "Translation": "ï¼ˆå¯„ç”Ÿè™«ãªã©ã®ï¼‰ä½“å†…ä¾µå…¥", "Meaning": "ã‚·ãƒ©ãƒŸã‚„å¯„ç”Ÿè™«ãªã©ãŒã€ä½“ï¼ˆã‚„å ´æ‰€ï¼‰ã«ãƒ‰ãƒãƒƒã¨å…¥ã‚Šå…¥ã‚Šè¾¼ã‚“ã§ä½ã¿ç€ãã€å®³ã‚’ä¸ãˆã¦ã„ã‚‹çŠ¶æ…‹ã§ã™ã€‚" },
            { "Word": "antibiotic", "Phonetic": "[Ã¦Ì€ntibaiÉ”Ìtik]", "Translation": "æŠ—ç”Ÿç‰©è³ª", "Meaning": "ä½“å†…ã®ã€Œç´°èŒï¼ˆãƒã‚¤ã‚­ãƒ³ï¼‰ã€ã‚’ã‚„ã£ã¤ã‘ãŸã‚Šã€å¢—ãˆã‚‹ã®ã‚’æ­¢ã‚ãŸã‚Šã™ã‚‹é­”æ³•ã®è–¬ã€‚<br>â€»ã‚¦ã‚¤ãƒ«ã‚¹ã«ã¯åŠ¹ã‹ãªã„ã®ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚" },
            { "Word": "immune system", "Phonetic": "---", "Translation": "å…ç–«ã‚·ã‚¹ãƒ†ãƒ ", "Meaning": "å¤–ã‹ã‚‰æ¥ãŸæ•µï¼ˆã‚¦ã‚¤ãƒ«ã‚¹ç­‰ï¼‰ã‹ã‚‰èº«ã‚’å®ˆã‚‹ã€è‡ªåˆ†å°‚ç”¨ã®ã€Œãƒœãƒ‡ã‚£ãƒ¼ã‚¬ãƒ¼ãƒ‰è»å›£ã€ã®ã‚ˆã†ãªä»•çµ„ã¿ã€‚" },
            { "Word": "vaccination", "Phonetic": "[vÃ¦Ì€ksÉ™nÃ©iÊƒÉ™n]", "Translation": "äºˆé˜²æ¥ç¨®", "Meaning": "æœ¬ç‰©ã®ç—…æ°—ã«ãªã‚‹å‰ã«ã€å¼±ã„èŒã‚’ä½“ã«å…¥ã‚Œã¦äºˆè¡Œæ¼”ç¿’ã‚’ã•ã›ã€å…ç–«ã‚’ä½œã£ã¦ãŠãã“ã¨ï¼ˆãƒ¯ã‚¯ãƒãƒ³ã‚’æ‰“ã¤ã“ã¨ï¼‰ã€‚" },
            { "Word": "tolerance", "Phonetic": "[tÉ‘ÌlÉ™rÉ™ns]", "Translation": "è€æ€§", "Meaning": "è–¬ãªã©ã‚’ä½¿ã„ã™ãã¦ã€ä½“ãŒãã‚Œã«æ…£ã‚Œã¦ã—ã¾ã„ã€ä»¥å‰ã¨åŒã˜é‡ã§ã¯åŠ¹ã‹ãªããªã£ã¦ã—ã¾ã†ã“ã¨ã€‚" },
            { "Word": "hiccup", "Phonetic": "[hÃ­kÊŒp]", "Translation": "ã—ã‚ƒã£ãã‚Š", "Meaning": "æ¨ªéš”è†œãŒè‡ªåˆ†ã®æ„å¿—ã¨ã¯é–¢ä¿‚ãªãã€Œãƒ“ã‚¯ãƒƒã€ã¨å‹•ã„ã¦ã—ã¾ã†ã€ã‚ã®ç¾è±¡ã€‚" },
            { "Word": "sneeze", "Phonetic": "[sniËz]", "Translation": "ãã—ã‚ƒã¿", "Meaning": "é¼»ã«å…¥ã£ãŸç•°ç‰©ã‚’è¿½ã„å‡ºã™ãŸã‚ã«ã€è‚ºã‹ã‚‰ç©ºæ°—ã‚’å‹¢ã„ã‚ˆãã€Œãƒã‚¯ã‚·ãƒ§ãƒ³ï¼ã€ã¨å‡ºã™å‹•ä½œã€‚" },
            { "Word": "symptom", "Phonetic": "[sÃ­mptÉ™m]", "Translation": "ï¼ˆç—…æ°—ã®ï¼‰ç—‡çŠ¶", "Meaning": "ç†±ãŒã‚ã‚‹ã€å–‰ãŒç—›ã„ãªã©ã€ä½“ãŒç™ºä¿¡ã—ã¦ã„ã‚‹ã€Œã©ã“ã‹ãŠã‹ã—ã„ãã€ã¨ã„ã†å…·ä½“çš„ãªã‚µã‚¤ãƒ³ã€‚" },
            { "Word": "fatigue", "Phonetic": "[fÉ™tÃ­ËÉ¡]", "Translation": "ç–²åŠ´", "Meaning": "ãŸã ã®ç–²ã‚Œã§ã¯ãªãã€å¯ã¦ã‚‚ãªã‹ãªã‹å–ã‚Œãªã„ã‚ˆã†ãªã€Œãšã£ã—ã‚Šé‡ã„ã€æ·±åˆ»ãªç–²ã‚Œã€ã®ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ã€‚" },
            { "Word": "irritation", "Phonetic": "[Ã¬ritÃ©iÊƒÉ™n]", "Translation": "åˆºæ¿€ã€ç‚ç—‡", "Meaning": "çš®è†šãªã©ãŒãƒ’ãƒªãƒ’ãƒªã€ãƒ ã‚ºãƒ ã‚ºã—ã¦ã€ä¸å¿«ã§èµ¤ããªã£ã¦ã„ã‚‹ã‚ˆã†ãªçŠ¶æ…‹ã€‚" },
            { "Word": "nausea", "Phonetic": "[nÉ”ÌËziÉ™]", "Translation": "åãæ°—", "Meaning": "ãŠè…¹ã®ã‚ãŸã‚ŠãŒãƒ ã‚«ãƒ ã‚«ã—ã¦ã€ã€Œä»Šã«ã‚‚æˆ»ã—ã¦ã—ã¾ã„ãã†...ã€ã¨ã„ã†æ°—æŒã¡æ‚ªã•ã®ã“ã¨ã€‚" },
            { "Word": "infection", "Phonetic": "[infÃ©kÊƒÉ™n]", "Translation": "æ„ŸæŸ“", "Meaning": "ã‚¦ã‚¤ãƒ«ã‚¹ã‚„ç´°èŒãŒä½“ã®ä¸­ã«ä¾µå…¥ã—ã¦ã€ãã“ã§æ‚ªã•ã‚’ã—å§‹ã‚ã‚‹ã“ã¨ã€‚" },
            { "Word": "sprain", "Phonetic": "[sprein]", "Translation": "ã­ã‚“ã–ï¼ˆã™ã‚‹ï¼‰", "Meaning": "é–¢ç¯€ã‚’ã‚°ãƒãƒƒã¨ã²ã­ã£ã¦ã€é­å¸¯ã‚’ä¼¸ã°ã—ãŸã‚Šå‚·ã‚ãŸã‚Šã™ã‚‹ã“ã¨ã€‚ç‰¹ã«é–¢ç¯€ã®ã‚±ã‚¬ã«ä½¿ã„ã¾ã™ã€‚" },
            { "Word": "necrosis", "Phonetic": "[nekrÃ³usis]", "Translation": "å£Šæ­»", "Meaning": "è¡€ãŒé€šã‚ãªããªã£ãŸã‚Šã—ã¦ã€ä½“ã®çµ„ç¹”ï¼ˆç´°èƒï¼‰ã®ä¸€éƒ¨ãŒå®Œå…¨ã«æ­»ã‚“ã§ã—ã¾ã†ã“ã¨ã€‚" },
            { "Word": "paralysis", "Phonetic": "[pÉ™rÃ¦ÌlÉ™sis]", "Translation": "éº»ç—º", "Meaning": "ç¥çµŒã®ãƒ€ãƒ¡ãƒ¼ã‚¸ãªã©ã§ã€ä½“ã®ä¸€éƒ¨ãŒå‹•ã‹ã›ãªããªã£ãŸã‚Šã€æ„Ÿè¦šãŒãªããªã£ãŸã‚Šã™ã‚‹ã“ã¨ã€‚" },
            { "Word": "dehydration", "Phonetic": "[dÃ¬ËhaidrÃ©iÊƒÉ™n]", "Translation": "è„±æ°´(ç—‡)", "Meaning": "ä½“å†…ã®æ°´åˆ†ãŒã‚«ãƒ©ã‚«ãƒ©ã«è¶³ã‚Šãªããªã£ã¦ã€ã‚ã¾ã„ã‚„é ­ç—›ãŒèµ·ãã‚‹å±é™ºãªçŠ¶æ…‹ã€‚" },
            { "Word": "ailment", "Phonetic": "[Ã©ilmÉ™nt]", "Translation": "ï¼ˆæ¯”è¼ƒçš„è»½ã„ï¼‰ç—…æ°—", "Meaning": "æ‰‹è¡“ãŒå¿…è¦ãªå¤§ç—…ã¨ã„ã†ã‚ˆã‚Šã¯ã€æŒç—…ã‚„ã¡ã‚‡ã£ã¨ã—ãŸä½“èª¿ä¸è‰¯ã‚’æŒ‡ã™ã€å°‘ã—ä¸å¯§ãªè¨€ã„æ–¹ã€‚" },
            { "Word": "diagnosis", "Phonetic": "[dÃ iÉ™É¡nÃ³usis]", "Translation": "è¨ºæ–­", "Meaning": "ãŠåŒ»è€…ã•ã‚“ãŒæ¤œæŸ»çµæœãªã©ã‚’è¦‹ã¦ã€ã€Œã‚ãªãŸã®ç—…æ°—ã¯ã“ã‚Œã§ã™ã­ã€ã¨ç‰¹å®šã™ã‚‹ã“ã¨ã€‚" },
            { "Word": "asthma", "Phonetic": "[Ã¦ÌzmÉ™]", "Translation": "å–˜æ¯", "Meaning": "ç©ºæ°—ã®é€šã‚Šé“ãŒç‹­ããªã£ã¦ã€å‘¼å¸ã‚’ã™ã‚‹ã¨ãã«ã€Œã‚¼ãƒ¼ã‚¼ãƒ¼ã€ã¨éŸ³ãŒã—ã¦è‹¦ã—ããªã‚‹ç—…æ°—ã€‚" },
            { "Word": "measles", "Phonetic": "[mÃ­Ëzlz]", "Translation": "éº»ç–¹ã€ã¯ã—ã‹", "Meaning": "èµ¤ã„ãƒ–ãƒ„ãƒ–ãƒ„ã¨é«˜ç†±ãŒå‡ºã‚‹ã€ã¨ã¦ã‚‚æ„ŸæŸ“åŠ›ãŒå¼·ã„ã‚¦ã‚¤ãƒ«ã‚¹æ€§ã®ç—…æ°—ã€‚" },
            { "Word": "smallpox", "Phonetic": "[smÉ”ÌËlpÉ‘ks]", "Translation": "å¤©ç„¶ç—˜", "Meaning": "ã‹ã¤ã¦ä¸–ç•Œä¸­ã§æã‚Œã‚‰ã‚ŒãŸã€å…¨èº«ã«ç™ºç–¹ãŒã§ãã‚‹æ·±åˆ»ãªæ„ŸæŸ“ç—‡ï¼ˆç¾åœ¨ã¯æ ¹çµ¶ã•ã‚Œã¦ã„ã¾ã™ï¼‰ã€‚" },
            { "Word": "malnutrition", "Phonetic": "[mÃ¦Ì€lnjutrÃ­ÊƒÉ™n]", "Translation": "æ „é¤Šå¤±èª¿", "Meaning": "ã€Œãƒãƒ«ï¼ˆæ‚ªã„ï¼‰ã€ï¼‹ã€Œãƒ‹ãƒ¥ãƒ¼ãƒˆãƒªã‚·ãƒ§ãƒ³ï¼ˆæ „é¤Šï¼‰ã€ã€‚å¿…è¦ãªæ „é¤ŠãŒè¶³ã‚Šãšã€ä½“ãŒå¼±ã£ã¦ã„ã‚‹çŠ¶æ…‹ã€‚" },
            { "Word": "amnesia", "Phonetic": "[Ã¦mnÃ­ËÊ’É™]", "Translation": "è¨˜æ†¶å–ªå¤±(ç—‡)", "Meaning": "ã‚·ãƒ§ãƒƒã‚¯ã‚„äº‹æ•…ãªã©ã§ã€è‡ªåˆ†ã®åå‰ã‚„éå»ã®å‡ºæ¥äº‹ã‚’ãƒãƒ­ãƒƒã¨å¿˜ã‚Œã¦æ€ã„å‡ºã›ãªããªã‚‹ã“ã¨ã€‚" },
            { "Word": "remedy", "Phonetic": "[rÃ©mÉ™di]", "Translation": "æ²»ç™‚(è–¬)", "Meaning": "ç—…æ°—ã‚’æ²»ã™ãŸã‚ã®æ–¹æ³•ã‚„é£²ã¿è–¬ã€‚å®¶åº­ã§ã§ãã‚‹ã€ŒãŠã°ã‚ã¡ã‚ƒã‚“ã®çŸ¥æµã€çš„ãªæ²»ç™‚æ³•ã‚‚å«ã¾ã‚Œã¾ã™ã€‚" }
        ];

        let activeWords = [...wordData];
        let currentIndex = 0;

        const cardEl = document.getElementById('card');
        const wordEl = document.getElementById('word-display');
        const phoneticEl = document.getElementById('phonetic-display');
        const translationEl = document.getElementById('translation-display');
        const meaningEl = document.getElementById('meaning-display');
        const progressEl = document.getElementById('progress-info');
        const gameContainer = document.getElementById('game-container');
        const completeScreen = document.getElementById('complete-screen');

        let synth = window.speechSynthesis;
        let voices = [];

        function loadVoices() {
            voices = synth.getVoices();
        }
        loadVoices();
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = loadVoices;
        }

        function updateCard() {
            if (activeWords.length === 0) {
                showComplete();
                return;
            }
            const current = activeWords[currentIndex];
            wordEl.textContent = current.Word;
            phoneticEl.textContent = current.Phonetic;
            translationEl.textContent = current.Translation;
            meaningEl.innerHTML = current.Meaning;
            
            cardEl.classList.remove('is-flipped');
            progressEl.textContent = `æ®‹ã‚Š: ${activeWords.length} æš`;
        }

        function flipCard() {
            cardEl.classList.toggle('is-flipped');
        }

        function playAudio(event) {
            event.stopPropagation();
            const text = activeWords[currentIndex].Word;
            const utter = new SpeechSynthesisUtterance(text);
            const preferredVoices = ["Google US English", "Samantha", "Alex", "Microsoft Zira"];
            const voice = voices.find(v => preferredVoices.some(p => v.name.includes(p))) || voices.find(v => v.lang.startsWith('en'));
            if (voice) utter.voice = voice;
            utter.lang = 'en-US';
            utter.rate = 0.9;
            synth.speak(utter);
        }

        function markAsLearned() {
            activeWords.splice(currentIndex, 1);
            if (currentIndex >= activeWords.length) currentIndex = 0;
            updateCard();
        }

        function markAsRetry() {
            currentIndex = (currentIndex + 1) % activeWords.length;
            updateCard();
        }

        function showComplete() {
            gameContainer.style.display = 'none';
            completeScreen.style.display = 'block';
        }

        function restart() {
            activeWords = [...wordData];
            currentIndex = 0;
            gameContainer.style.display = 'block';
            completeScreen.style.display = 'none';
            updateCard();
        }

        window.onload = updateCard;
    </script>
</body>
</html>
